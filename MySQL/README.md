# MySQL

记录 MySQL 的一些总结。

__参考书籍__

- 《MySQL 必知必会》__@1__

## Tips

记录在使用 MySQL 的过程中一些注意事项、使用技巧等。

| \# | Tip | Book | Page |
| :-:| :-: | :--: | :--: |
| 1 | [Primary key 最好习惯](#Primary-key-最好习惯) | @1 | 10 |
| 2 | [检索结果的排序规则](#检索结果的排序规则) | @1 | 37 |
| 3 | [应用层过滤的缺点](#应用层过滤的缺点) | @1 | 46 |
| 4 | [执行匹配时的默认规则](#执行匹配时的默认规则) | @1 | 47 |
| 5 | [NULL 与 不匹配](#NULL-与-不匹配) | @1 | 51 |
| 6 | [IN 操作符的优势](#IN-操作符的优势) | @1 | 58 |
| 7 | [通配符的使用技巧](#通配符的使用技巧) | @1 | 63 |

### Primary key 的最好习惯

- 不更新主键列中的值
- 不重用主键列的值
- 不在主键列中使用可能会更改的值（如：企业或个人的姓名、电话等）

### 检索数据的排序规则

检索出的数据并不是以存粹的随机顺序显示，而是将以它在底层中表现出来的顺序显示（比如添加到表中的顺序）。但是如果后来进行了更新或删除操作，那么此顺序将会收到影响。

因此，如果不明确控制的话，不能依赖该排序顺序。关系数据库设计理论认为，如果不明确排序顺序，则不应该假定检索出的数据的顺序有意义。

### 应用层过滤的缺点

- 极大的影响应用的性能
- 不具备可伸缩性
- 网络带宽浪费

### 执行匹配时的默认规则

MySQL 在执行匹配时默认不区分大小写（即 `fuses` 会匹配到 `fuses` 和 `Fuses`），所以在区分大小写的项目中要格外注意这一点。

### NULL 与 不匹配

因为 `NULL` 具有特殊含义，所以数据库在匹配过滤（即 `=` 或 `!=` 等操作）时不知道与 `NULL` 是否匹配，所以结果不返回具有 `NULL` 值的行。

适用于这个规则的__操作符__

- `WHERE`
- `LIKE`

``` sql
/*
    有这样一个表 customers

    | user | email |
    | :--: | :---: |
    | Tom | Tom@tom.com |
    | Jerry | Jerry@jerry.com |
    | Lucy | NULL |
*/

/* 执行操作 /*
SELECT user, email FROM customers WHERE email <> 'Lucy@lucy.com';

/*
    结果如下

    | user | email |
    | :--: | :---: |
    | Tom | Tom@tom.com |
    | Jerry | Jerry@jerry.com |

    结果中并没有带 Lucy 用户的行，说明 NULL 值并没有参与过滤
*/
```

### IN 操作符的优势

`IN` 操作符与 `OR` 操作符完成同样的功能，但是它还有别的优势

- 在使用长的合法选项清单时，`IN` 操作符的语法更清楚且更直观
- 在使用 `IN` 时，计算的次序更容易管理（因为使用的操作符更少）
- `IN` 操作符一般比 `OR` 操作符清单执行更快
- `IN` 的最大有点是可以包含其他 `SECLECT` 语句，是能够更好更动态地建立 `WHERE` 子句

### 通配符的使用技巧

- 不要过度使用通配符。如果其他操作符能达到相同的目的，应该使用其他操作符
- 在确实需要使用通配符时，除非绝对有必要，否则不要把他们用在搜索模式的开始处。把通配符置于搜索模式的开始处，搜索起来是最慢的
- 仔细注意通配符的位置。如果放错位置，可能不会返回想要的数据
